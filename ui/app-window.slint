import { GridBox, LineEdit, Switch, Button } from "std-widgets.slint";

export component AppWindow inherits Window {

    //Generate callback
    callback generate_password(string, int);

    //Generated password variable
    in-out property <string> password;
    in-out property <string> length: value.text;
    in-out property <int> option: 1;

    //Main app window layout
    width: 480px;
    height: 480px;
    title: @tr("Password generator");
    icon: @image-url("./icon.png");
    background: grey;

    GridLayout {
        spacing: 20px;
        padding: 10px;
        Row {
            Text {
                height: 80px;
                horizontal-alignment: center;
                vertical-alignment: center;
                text: "Password generator";
                color: darkgrey;
                font-size: 20pt;
                font-family: "Arial";
                colspan: 2;
            }
        }
        Row {
            generated := LineEdit {
                height: 60px;
                placeholder-text: "Password";
                text: password;
            }
            Button {
                height: 60px;
                text: "Copy";
                primary: true;
                clicked => {
                    generated.select-all(); //Select password text
                    generated.copy(); //Copy password to clipboard
                    debug("Copied"); //Console text
                }
            }
        }
        Row {
            Button {
                text: "Generate";
                primary: true;
                height: 60px;
                colspan: 2;
                clicked => {
                    generate_password(length, option);
                }
            }
        }
        Row {
            Text {
                text: "Password length:";
                height: 30px;
                font-size: 14px;
                font-weight: 100;
                vertical-alignment: center;
                horizontal-alignment: left;
                value := LineEdit {
                    text: 16;
                    height: 20px;
                    width: 40px;
                    input-type: number;
                    horizontal-alignment: center;
                    edited => {
                        generate_password(length, option);
                    }
            }
            }
        }
        Row {
            up := Switch {
                text: "Uppercase";
                checked: true;
                toggled => {
                    self.checked = true;
                    low.checked = false;
                    num.checked = false;
                    spec.checked = false;
                    option = 1;
                    generate_password(length, option);
                }
            }
        }
        Row {
            low := Switch {
                text: "Lowercase";
                checked: false;
                toggled => {
                    up.checked = true;
                    self.checked = true;
                    num.checked = false;
                    spec.checked = false;
                    option = 3;
                    generate_password(length, option);
                }
            }
        }
        Row {
            num := Switch {
                text: "Numbers";
                checked: false;
                toggled => {
                    up.checked = true;
                    low.checked = true;
                    self.checked = true;
                    spec.checked = false;
                    option = 5;
                    generate_password(length, option);
                }
            }
        }
        Row {
            spec := Switch {
                text: "Special characters";
                checked: false;
                toggled => {
                    up.checked = true;
                    low.checked = true;
                    num.checked = true;
                    self.checked = true;
                    option = 7;
                    generate_password(length, option);
                }
            }
        }
    }
}